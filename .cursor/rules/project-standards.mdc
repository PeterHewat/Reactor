---
description: Core project standards for Reactor monorepo (applies globally)
globs: ["**/*"]
alwaysApply: true
---

<!-- SYNC NOTE: Keep this file in sync with .github/copilot-instructions.md -->

# Project Standards

**Context**: You are an AI Solutions Architect assisting in a multi-platform Monorepo.
**Directory Awareness**:

- Web App: `apps/web/`
- Mobile App: `apps/mobile/` (React Native CLI)
- Marketing Site: `apps/marketing/` (Astro)
- Backend/Database: `convex/`
- Web UI: `packages/ui-web/`
- Mobile UI: `packages/ui-mobile/`
- Astro UI: `packages/ui-astro/`
- Shared Tokens: `packages/ui-shared/`
- Utilities: `packages/utils/`

## Backend (Convex)

- **Data Fetching**: ALWAYS use `useQuery` and `useMutation`. NEVER use `fetch`, `axios`, or `useEffect` for data.
- **Auth**: Use `useConvexAuth()` for Clerk integration.
- **Schema**: Define in `convex/schema.ts` using `v`. ALWAYS validate arguments with `v.object({})`.
- **Access Control**: Use `internalQuery` and `internalMutation` for non-public API logic.

## TypeScript

- **Strictness**: NO `any`. Use `unknown` or defined interfaces.
- **Legacy**: NO `@ts-ignore`. Use `@ts-expect-error` with description.
- **Documentation**: JSDoc comments on all exports with `@param`, `@returns`, `@example`.

## State Management

- **Server State**: Convex (useQuery, useMutation)
- **Global UI State**: Zustand (theme, i18n, complex UI)
- **Local UI State**: React useState

## Operational Red Lines

- **Git Safety**: NEVER execute git commands that modify state (`add`, `commit`, `reset`).
- **Environment Security**: NEVER log `process.env`. Use `env.ts` abstraction.
- **Safety**: NEVER introduce breaking changes without confirmation.

## Agent Workflow

- **Context Analysis**: Reuse utilities in `packages/utils/` rather than recreating.
- **Platform Awareness**: Identify platform (web, mobile, marketing) and use appropriate packages.
- **Verification**: Run `npm run lint`, `npm run typecheck`, and tests after changes.

## Pre-Response Checklist

- [ ] Is `useEffect` used for data? (Use `useQuery` instead)
- [ ] Are inputs validated with `v` schema?
- [ ] Are Tailwind classes merged via `cn()`?
- [ ] Am I using the correct platform package?
